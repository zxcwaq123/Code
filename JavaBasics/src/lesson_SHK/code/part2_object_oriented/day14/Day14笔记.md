# Day14笔记

## 一、 static关键字(静态的)

### 1. static可以用来修饰：属性、方法、代码块、内部类

* 存在于方法区的静态域(static field)中。

### 2. 使用static修饰属性（类变量）

#### 2.1 属性，按是否使用static修饰，又分为：静态属性 vs 非静态属性（实例变量）

* 实例变量：创建了类的多个对象，每个对象都独立的拥有一套类中的实例变量（非静态属性）。当修改其中一个对象中的非静态属性时，不会导致其他对象中同样的属性值的修改。

* 静态变量：创建了类的多个对象，多个对象共享一个静态变量。当通过某一个对象修改静态变量时，会导致其他对象调用此静态变量时，是修改之后的。


#### 2.2 static修饰属性的其他说明

* 静态变量随着类的加载而加载。——> 可以通过“<font color=red>类名.静态变量</font>”的方法进行调用。

* 静态变量的加载要早于对象的创建。

* 由于类只会加载一次，则静态变量在内存中，也只会存在一份：存在方法区(Method Area)的静态域中。

#### 2.3 静态属性举例

* `System.in`、`Math.PI`、

### 3. 使用static修饰方法（静态方法）

#### 3.1 静态方法的特点

* 随着类的加载而加载 ——> 可以通过“<font color=red>类名.静态方法()</font>”的方式进行调用。

* 在静态的方法中，<font color=red>只能</font>调用静态的方法和属性。

* 在非静态方法中，则静态、非静态的方法和属性都可以调用。

### 4. static注意点

* 在静态的方法内，不能使用this、super关键字

* 关于静态属性和静态方法的使用，可以从生命周期的角度理解。

### 5. 判断一个属性/方法是否要声明为static

* 属性：属性是可以被多个对象所共享的，不会追着对象的不同而不同。

* 方法：

  * 操作静态属性的方法，通常设置为静态的

  * 工具类中的方法，习惯上声明为static的。如： `Math`、`Arrays`、`Collections`。

## 二、单例(Singleton)设计模式

### 1. 定义

* 采取一定的方法保证在整个软件系统中，对某个类只能存在一个对象实例。

### 2. 实现

#### 2.1 饿汉式
```java
class Bank{
    // 1. 私有化类的构造器
    private Bank(){

    }

    // 2. 在类的内部创建类的静态的对象
    private static Bank instance = new Bank();

    // 3. 提供公共的静态的方法，返回类的对象
    public static Bank getInstance(){
        return instance; // 4. 静态方法调用的属性也必须是静态的，因此2中声明为静态
    }
}
```

#### 2.2 懒汉式

```java
class Order{

    //1. 私有化类的构造器
    private Order(){
    }

    //2. 声明当前类的对象，没有初始化
    private static Order instance = null;

    //3. 提供公共的静态的方法，返回类的对象
    public static Order getInstance(){
        if(instance == null)
        instance = new Order(); // 4. 静态方法调用的属性也必须是静态的，因此2中声明为静态

        return instance;
    }
}
```

#### 2.3 区分饿汉式 和 懒汉式

* 饿汉式

  * 好处：线程安全

  * 坏处：对象加载时间过长

* 懒汉式

  * 坏处：目前写法，线程不安全。——> 到多线程内容再进行修改。

  * 好处：延迟对象的创建，节省内存。

## 三、main()方法的语法

```java
public static void main(String[]args){
        
        }
```

1. main()方法作为程序的入口


2. main()方法也是一个普通的静态方法


3. main()方法形参的出现，使其可以作为我们与控制台交互的方式。

## 四、类的成员之四：代码块（初始化块）

### 1. 代码块的作用

* 用来初始化类、类的对象

### 2. 代码块的结构

* 修饰：只能用static来修饰

  * 静态代码块（有static修饰）

  * 非静态代码块 （无任何修饰）

### 3. 静态代码块

* 内部可以有输出语句

* 随着<font color=red>**类**</font>的加载而执行

* 作用：初始化类的信息

* 若类中定义了多个静态代码块，则按声明的顺序执行

* 静态代码块优先于非静态代码块执行

* 静态代码块内<font color=red>**只能**</font>调用静态的属性、方法

```java
static{
    System.out.println("Hollow World!");
}
```

### 4. 非静态代码块

* 内部可以有输出语句

* 随着<font color=red>**对象**</font>的加载而执行

* 每创建一个对象，就执行一次非静态代码块

* 作用：可以在创建对象时，对对象的属性进行初始化

* 若类中定义了多个非静态代码块，则按声明的顺序执行

* 非静态代码块中非静态、静态属性、方法都可以调用

```java  
{
    System.out.println("Hollow World!");
}
```

### 5. 对属性可以赋值的位置（按先后顺序）

* 默认初始化

* 显示初始化 / 在代码块中赋值 (二者优先级一样)

* 构造器中初始化

* 有了对象以后，可以通过“对象.属性”或“对象.方法”的方式进行赋值


### 6. 子父类中静态、非静态；代码块、构造器、方法的执行顺序

* 由父及子，静态先行，代码块优先

## 五、 final修饰（类、方法、变量）

### 1. final修饰类：此类不能被其他类所继承

* 例如：String类、System类、StringBuffer类等。

### 2. final修饰方法：此方法不能被重写

* 例如：Object类中的`getClass()`方法

### 3. final修饰变量（属性和局部变量）：此变量就称为是一个常量（一般用全大写XXX）

* final修饰属性：可以考虑的赋值位置有： 显式初始化、代码块中初始化、构造器中初始化

* final修饰局部变量：表明表明此变量是一个常量，变量初始化之后，只能调用而不能修改。

### 4. static final

#### 4.1 static final修饰属性 ——> 全局常量

#### 4.2 static final修饰方法 ——> 方法只能被类来调用，且不能被重写。